<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Raphael JS</title>
	</head>
	<body style="background-color:#000">

		<canvas id="paper" style="background-color:#000;width:650px;float:left;height:400px;padding:0px;margin:20px"></canvas>

		<div id="dbg-info" style="width:200px;float:right"></div>
		
		<script src="lib/jquery-2.1.4.min.js" ></script>
		<script src="./js/utils.js" ></script>
		<script src="./js/Interval.js" ></script>
		<script src="./js/angle-utils.js" ></script>
		<script src="./js/Rect.js" ></script>
		<script src="./js/canvas-utils.js" ></script>
		<script src="./js/Shadow.js" ></script>
		<script src="./js/Bubble.js" ></script>
		<script src="./js/Bob.js" ></script>
		<script src="./js/Segment.js" ></script>
		<script src="./js/Door.js" ></script>
		<script src="./js/Glass.js" ></script>
		<script src="./js/Light.js" ></script>
		<script src="./js/Path.js" ></script>
		<script src="./js/Stair.js" ></script>
		<script src="./js/keyboard-control.js" ></script>
		<script src="./js/renderScene.js" ></script>
		<script src="./js/PointCloud.js" ></script>
		<script src="./js/random.js" ></script>
		<script src="./js/Slope.js" ></script>
		<script src="./js/Platform.js" ></script>
		<script>
					
					
					
					
					
			var paper_width = 650;
			var paper_height = 400;
						
						
			var paper = document.getElementById("paper");
			paper.width = paper_width;			
			paper.height = paper_height;			
					


			var num_points = 12;
			
			var innerCloud = ring(140,200, 80, num_points)
			innerCloud.sort();	
			var outerCloud = ring(140,200, 130, num_points);
			outerCloud.sort();	
			
			
			var platform = new Platform(innerCloud, outerCloud, true);
			
			var innerCloud = ring(400,200, 80, num_points)
			innerCloud.sort();	
			var outerCloud = ring(400,200, 130, num_points);
			outerCloud.sort();	
			
			var platform2 = new Platform(innerCloud, outerCloud, false);
			
			var platforms = [];
			platforms.push(platform);
			platforms.push(platform2);
			
			
			
			var sun = {x:1,y:1};
	
			
			var player = new Bob(20, 20, 10, 0);
			player.sightWidth=deg2rad(120);
			keyboardControl(player);

			
			
			function draw(){
			
				
				var ctx = paper.getContext("2d");
				ctx.fillStyle="#888";
				ctx.fillRect(0,0, paper.width, paper.height);				

/*
				ctx.fillStyle="rgba(0,0,0,0)";

				ctx.strokeStyle="#0f0";


				innerCloud.draw(paper);
				ctx.strokeStyle="#f00";
				outerCloud.draw(paper);
*/

				for(var i=0;i<platforms.length;i++){
					platforms[i].draw(paper, player);
					platforms[i].check(player)
				}
				// DRAWS PLAYER
				player.draw(paper);

					
				window.requestAnimationFrame(draw);
					
			
				
			}
			window.requestAnimationFrame(draw);
			//keyboardControl(player);






		</script>
	
	</body>
</html>
